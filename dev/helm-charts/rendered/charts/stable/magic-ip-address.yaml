---
# Source: magic-ip-address/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: RELEASE-NAME-magic-ip-address
  labels:
    app: magic-ip-address
    chart: magic-ip-address-0.1.0
    release: RELEASE-NAME
    heritage: Tiller
type: Opaque
data:
  PORT: JSFkKGZsb2F0NjQ9OTIwMCk=
  SELECTOR: YXBwPW15YXBw
  PROTOCOL: dGNw
  MAGIC_IP: MTY5LjI1NC4yMTAuMjEw
  HOST_INTERFACE: Y25pMA==
  verbose: PG5pbD4=

---
# Source: magic-ip-address/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: RELEASE-NAME-magic-ip-address
  labels:
    app: magic-ip-address
    chart: magic-ip-address-0.1.0
    release: RELEASE-NAME
    heritage: Tiller
---
# Source: magic-ip-address/templates/clusterrole.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: RELEASE-NAME-magic-ip-address
  labels:
    app: magic-ip-address
    chart: magic-ip-address-0.1.0
    release: RELEASE-NAME
    heritage: Tiller
rules:
- apiGroups: [""]
  resources:
  - namespaces
  - pods
  verbs: ["get", "list"]
---
# Source: magic-ip-address/templates/clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: RELEASE-NAME-magic-ip-address
  labels:
    app: magic-ip-address
    chart: magic-ip-address-0.1.0
    release: RELEASE-NAME
    heritage: Tiller
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: RELEASE-NAME-magic-ip-address
subjects:
- kind: ServiceAccount
  name: RELEASE-NAME-magic-ip-address
  namespace: hub
---
# Source: magic-ip-address/templates/daemonset.yaml
apiVersion: apps/v1beta2
kind: DaemonSet
metadata:
  name: RELEASE-NAME-magic-ip-address
  labels:
    app: magic-ip-address
    chart: magic-ip-address-0.1.0
    release: RELEASE-NAME
    heritage: Tiller
spec:
  selector:
    matchLabels:
      app: magic-ip-address
      release: RELEASE-NAME
  minReadySeconds: 10
  updateStrategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 1
  template:
    metadata:
      labels:
        app: magic-ip-address
        release: RELEASE-NAME
      annotations:
        checksum/secret: 7c0169ef69b87bb0f0ff14ed22e533ddfbc9d4081a067ce4cd8ad070e7b2397d
    spec:
      containers:
      - name: magic-ip-address
        image: "mumoshu/kube-magic-ip-assigner:0.9.0-1.9.8"
        imagePullPolicy: IfNotPresent
        envFrom:
        - secretRef:
            name: RELEASE-NAME-magic-ip-address
        env:
        - name: NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              fieldPath: spec.nodeName
        securityContext:
          runAsUser: 0
        resources:
          {}
          
      terminationGracePeriodSeconds: 60
      serviceAccountName: RELEASE-NAME-magic-ip-address
      tolerations:
      - key: node-role.kubernetes.io/master
        operator: Exists
        effect: NoSchedule

