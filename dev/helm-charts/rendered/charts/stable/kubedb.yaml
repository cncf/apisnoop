---
# Source: kubedb/templates/service-account.yaml

apiVersion: v1
kind: ServiceAccount
metadata:
  name: RELEASE-NAME-kubedb
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"


---
# Source: kubedb/templates/cluster-role.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: RELEASE-NAME-kubedb
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"
rules:
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs: ["create", "delete", "get", "list"]
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - rolebindings
  - roles
  verbs: ["create", "delete", "get", "patch"]
- apiGroups:
  - ""
  resources:
  - services
  verbs: ["create", "delete", "get", "patch"]
- apiGroups:
  - ""
  resources:
  - secrets
  - serviceaccounts
  verbs: ["create", "delete", "get", "patch"]
- apiGroups:
  - apps
  resources:
  - deployments
  - statefulsets
  verbs: ["create", "delete", "get", "patch", "update"]
- apiGroups:
  - batch
  resources:
  - jobs
  verbs: ["create", "delete", "get", "list", "watch"]
- apiGroups:
  - storage.k8s.io
  resources:
  - storageclasses
  verbs: ["get"]
- apiGroups:
  - ""
  resources:
  - pods
  verbs: ["deletecollection", "get", "list", "patch", "watch"]
- apiGroups:
  - ""
  resources:
  - persistentvolumeclaims
  verbs: ["create", "delete", "get", "list", "patch", "watch"]
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs: ["create", "delete", "get", "update"]
- apiGroups:
  - ""
  resources:
  - events
  verbs: ["create"]
- apiGroups:
  - ""
  resources:
  - nodes
  verbs: ["get", "list", "watch"]
- apiGroups:
  - kubedb.com
  resources:
  - '*'
  verbs: ['*']
- apiGroups:
  - monitoring.coreos.com
  resources:
  - servicemonitors
  verbs: ["create", "delete", "get", "list", "update"]


---
# Source: kubedb/templates/user-roles.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kubedb:core:admin
  labels:
    rbac.authorization.k8s.io/aggregate-to-admin: "true"
rules:
- apiGroups:
  - kubedb.com
  resources:
  - dormantdatabases
  - elasticsearches
  - memcacheds
  - mongodbs
  - mysqls
  - postgreses
  - redises
  - snapshots
  verbs:
  - create
  - delete
  - deletecollection
  - get
  - list
  - patch
  - update
  - watch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kubedb:core:edit
  labels:
    rbac.authorization.k8s.io/aggregate-to-edit: "true"
rules:
- apiGroups:
  - kubedb.com
  resources:
  - elasticsearches
  - memcacheds
  - mongodbs
  - mysqls
  - postgreses
  - redises
  - snapshots
  verbs:
  - create
  - delete
  - deletecollection
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - kubedb.com
  resources:
  - dormantdatabases
  verbs:
  - get
  - list
  - watch
---
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: kubedb:core:view
  labels:
    rbac.authorization.k8s.io/aggregate-to-view: "true"
rules:
- apiGroups:
  - kubedb.com
  resources:
  - dormantdatabases
  - elasticsearches
  - memcacheds
  - mongodbs
  - mysqls
  - postgreses
  - redises
  - snapshots
  verbs:
  - get
  - list
  - watch


---
# Source: kubedb/templates/cluster-role-binding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: RELEASE-NAME-kubedb
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: RELEASE-NAME-kubedb
subjects:
- kind: ServiceAccount
  name: RELEASE-NAME-kubedb
  namespace: hub


---
# Source: kubedb/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: RELEASE-NAME-kubedb
  labels:
    app: "kubedb"
    chart: "kubedb-0.1.3"
    release: "RELEASE-NAME"
    heritage: "Tiller"
spec:
  ports:
  - name: api
    port: 443
    targetPort: 8443
  selector:
    app: "kubedb"
    release: "RELEASE-NAME"

---
# Source: kubedb/templates/deployment.yaml
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: RELEASE-NAME-kubedb
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"
  initializers:
    pending: []
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "kubedb"
      release: "RELEASE-NAME"
  template:
    metadata:
      labels:
        app: "kubedb"
        release: "RELEASE-NAME"
    spec:
      serviceAccountName: RELEASE-NAME-kubedb
      containers:
      - name: operator
        image: kubedb/operator:0.8.0-beta.2
        imagePullPolicy: IfNotPresent
        args:
        - run
        - --v=3
        - --docker-registry=kubedb
        - --exporter-tag=0.8.0-beta.2
        - --governing-service=kubedb
        - --rbac=true
        env:
        - name: OPERATOR_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
      - name: server
        image: kubedb/kubedb-server:0.1.0-beta.2
        imagePullPolicy: IfNotPresent
        args:
        - run
        - --v=3
        - --secure-port=8443
        - --audit-log-path=-
        - --tls-cert-file=/var/serving-cert/tls.crt
        - --tls-private-key-file=/var/serving-cert/tls.key
        ports:
        - containerPort: 8443
        volumeMounts:
        - mountPath: /var/serving-cert
          name: serving-cert
        readinessProbe:
          httpGet:
            path: /healthz
            port: 8443
            scheme: HTTPS
      volumes:
      - name: serving-cert
        secret:
          defaultMode: 420
          secretName: RELEASE-NAME-kubedb-apiserver-cert
---
# Source: kubedb/templates/apiregistration.yaml

apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.admission.kubedb.com
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"
spec:
  group: admission.kubedb.com
  version: v1alpha1
  service:
    namespace: hub
    name: RELEASE-NAME-kubedb
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM5akNDQWQ2Z0F3SUJBZ0lRVVlrNzlwOGsvNlFJNnMxOEhtSllGekFOQmdrcWhraUc5dzBCQVFzRkFEQVYKTVJNd0VRWURWUVFERXdwemRtTXRZMkYwTFdOaE1CNFhEVEU0TVRJd05USXhNemMwTlZvWERUSTRNVEl3TWpJeApNemMwTlZvd0ZURVRNQkVHQTFVRUF4TUtjM1pqTFdOaGRDMWpZVENDQVNJd0RRWUpLb1pJaHZjTkFRRUJCUUFECmdnRVBBRENDQVFvQ2dnRUJBTEI3U1NXam11U1VZU05IbkxScE5tL2FFbmZ3czlBTUoxOUZRRGtkZWxFSzQzYVQKQUlGaXE4SXp0aW5ZcHZneDhrYm1waW1LMUo3SkJXRzNzbE1ZQ1BMQ1RHY2swakpkWnczWnBkK1JlQ3VlM1EyVQp5VHJudUR3eTZDVmVrR1RUeGhZcEJkUkRMMFl1ZE13WmR1bGFXY1JMU1dKb3JXL0cyKzNQdGZ5ZE94TU9FelhWCkgvUVh1Q2wwTGFzUzg4RlYwbEFsWDdtcFlPWnNFRlNxb2pyNUNCaE50R3lQb0pnVzdxRDNFbGo1YTlsNE8zR1cKOGVIekpDRGRlZnVGczdPamNCdXFNT1kxM2NETzJjRkE4Q1lOeHRRTnN4VTZYTC95TEt6VzJ0U2thaTd1cDFoaApSMlpNQ0tmalhTajdQQlpaa3VvNndjVjkvdHV2RFlvUFNleC9NcXNDQXdFQUFhTkNNRUF3RGdZRFZSMFBBUUgvCkJBUURBZ0trTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQkJnZ3JCZ0VGQlFjREFqQVBCZ05WSFJNQkFmOEUKQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUJBUUIzc0ZiOXdFNEVNaVM2M1hJeklpUWNqZlRwUURMYgpvcFNyUldPYWRJVG1GTUVHNHFqRUxjNXVJSXVyRFhrNFZSb0tKTGtsNS9oVVVSM09zYWdQeXZwMmUwMUYrTWJVCjVhWVAyR2ZPZW4xd0Q5VlorOFlrNURrK21LTXUrSU9RdE90K0cwZ0diQ2xmb1M5bjFyVlRyUVRxT0F0K2hyODQKZm9sUmt6NUZXSDNjUkw0MVhiOGFDMjVMRGFBZkU0czNNZWJCa21mNzhKK1lYaCtmRFhSTzdNWThrMmJxMkFNNgpkdDVpelY5Zlh2QnhKZFVmKzMwcEFUY1RBK2pJWXE4NWxYV2dHSUJkQ0l2M2VKNC9HbzdNTmtmeVc0cXRGdGZJCkhrY0RlakpIWFBMNXdNQTc0eVMzNzR5ZkNuZCtJWGc4a0lZZFFwcjBnb2I0ZUpHQnN3N3h3M1pwCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  groupPriorityMinimum: 10000
  versionPriority: 15
---
apiVersion: v1
kind: Secret
metadata:
  name: RELEASE-NAME-kubedb-apiserver-cert
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"
type: Opaque
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURQakNDQWlhZ0F3SUJBZ0lRWFhJcnpXckNhd1NGTUU4TmpLaXo3REFOQmdrcWhraUc5dzBCQVFzRkFEQVYKTVJNd0VRWURWUVFERXdwemRtTXRZMkYwTFdOaE1CNFhEVEU0TVRJd05USXhNemMwTlZvWERUSTRNVEl3TWpJeApNemMwTlZvd0hqRWNNQm9HQTFVRUF4TVRVa1ZNUlVGVFJTMU9RVTFGTFd0MVltVmtZakNDQVNJd0RRWUpLb1pJCmh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTWRVbGc0Tmw4eWNwTkFTMkhMdkhuYzNMYXJwMzVaNFpieEoKQUdmbnFpM3lPR0kySzZzeTJZallUWmJHV0t4ZUpCYitZRC9uY0xWY0tOWGV0SE9OaGVyVHpDMnNjenNRVDlMZgpidWM4UjRiT3hJdEdlMVowYUltNk1uL2ZkMW9yVUU5RDFyVEtnaDdMVEVYY0taVzhSOFJmZ1d0UWErMVlDZnlMCkxNdHBRZ1ZSMEg1ZzhiYTE3eEE1OFFlSzEyVjdQY2lmWHRSSklId2NWeXVsUElGaHZ5QWZEUHYrWnRaMTZoaVIKbnNkRnRhZW5MZnpXYThiT0NzVms1Z2tSQm8yc2t1WnZqZS9wTy9rYjBpRUEvUjVmZHU1clpPV25XS3htR05QSAphbGtaaE90Z1lVdmdmNmxQK1N3R3I4V0NTRnJuUUw0VHk5THVuRVRXT0lZQS9vQWJJbVVDQXdFQUFhT0JnREIrCk1BNEdBMVVkRHdFQi93UUVBd0lGb0RBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXcKREFZRFZSMFRBUUgvQkFJd0FEQS9CZ05WSFJFRU9EQTJnaGRTUlV4RlFWTkZMVTVCVFVVdGEzVmlaV1JpTG1oMQpZb0liVWtWTVJVRlRSUzFPUVUxRkxXdDFZbVZrWWk1b2RXSXVjM1pqTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCCkFRQ3ZLZlFhbjVHNHM0U2FrSCtsd2V3MzFnUU5yQlVJWEQxTTRleXZ1YThUL3ZUU0Z6d1l1UCtibnNOdHdpOEkKSkF5cm5nWkU0NzB5YVJITmZQeTV1aHVUTFQwU1JqdCtEWER4Ry9XcHVXVDJlbHNIaldJZDhnWXJaM01rcTMxcAo2S290bFhYaUtiSDZodmdzSU1oQ1lvemVQaFZBeGxJc2VOdnk0VCtOK2tmdHBsZjB0K0xvVXptYlZidU5VY2hQCitHT3VyQ2JMcFJqYk9vTGliTExvczRpOFkvaWlvaFdtU2dZRWNSbW83SjFjUVQ0VldUL2IzRTcxRkE1aGdzZ2oKVEN0ZGx5VWF0cFdtdE1DUlpNcHgrMmlLb0dPeFpQa25DM3MvL2tDZVZxLy9MM2dONkFtdTV6cVhiYUVRaVhNRQprUlhFYzBoZytjNlUra1dwMkdUckdDZXoKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBeDFTV0RnMlh6SnlrMEJMWWN1OGVkemN0cXVuZmxuaGx2RWtBWitlcUxmSTRZallyCnF6TFppTmhObHNaWXJGNGtGdjVnUCtkd3RWd28xZDYwYzQyRjZ0UE1MYXh6T3hCUDB0OXU1enhIaHM3RWkwWjcKVm5Sb2lib3lmOTkzV2l0UVQwUFd0TXFDSHN0TVJkd3BsYnhIeEYrQmExQnI3VmdKL0lzc3kybENCVkhRZm1EeAp0clh2RURueEI0clhaWHM5eUo5ZTFFa2dmQnhYSzZVOGdXRy9JQjhNKy81bTFuWHFHSkdleDBXMXA2Y3QvTlpyCnhzNEt4V1RtQ1JFR2pheVM1bStONytrNytSdlNJUUQ5SGw5MjdtdGs1YWRZckdZWTA4ZHFXUm1FNjJCaFMrQi8KcVUvNUxBYXZ4WUpJV3VkQXZoUEwwdTZjUk5ZNGhnRCtnQnNpWlFJREFRQUJBb0lCQUZ5S1hxZmprNmdBeVZ0NApoRmpIdnVNbUVPT2FkSjFOQkI1bjNmSmZVVmpIYlhuYklHYjQwcGwvb25Ydlc5ZWFWVEwvb2Z2SkhVQjFxdGV2Cjd5TCtmei9JV0xDVHNXT29iUWEvaUtOK0RzNzlTNjVGYUpsNHJkZlRSQUt0NHFGUUhwYk9MZTM5WG0raGZxV28KVXY0YlRVNVQ4S2U3ekgrQ01oQzNKSExEU1UxaUhsZlkzUFFyd3QrY3FXME9ia2lLZzdQNGErTWNRbFc5bGpTNQpwUVBqQnVYQ1BpNWNIZ3hDcGlVTkNGRGJnTGNKTjhZbkZXdVBqMkIxRnVuT3FrN1FMVlUwMFNNOFdPZVVzckNPCm4vd3k0VzZnVTB0cnl4YWkyZjR3NGZYbmZocHBsK3lWUEt0THVMUTYvSHFIREUyaTRzYWt2eFdPb2Z3VXZzUzIKQmE1c2VMa0NnWUVBN2pvRWRLdHdxUHVMSnBUaWt3RzZ4QWhFS2dMUERHYWRhbFZGTkExMElick5paGtVMGtGWgptdm5YVGw3NEUrUWJjTkJBZ1dCMi8xNWJMang3aTV0MnUzaG1wWVhJUCtEbWNIcHNwRzNXUldNNHdmc01CN2tuCkxwaklFd25lUklqMm5sUDdaT3RYdGF4ZHRGOU8zdTV6MkdIU3B2SGdsWFpkaFdmdm9JZHdRdDhDZ1lFQTFqT3MKeEVpclBhd1Y2MHhHUktKRzVLLzdXMXVRV0orTkQ1V0JhOS82Zzl5TXk3cDlYL0V6NmprOUJUQkFiUHpUOU9tdwpML0Y2NmRCeFhYb3VvTmkyVmpLN2tKY2RHS3NyRktMelVVZEp3Wk9Ia1FmY1pzbjN4MmUzMXIwNDFBZ1ZveFFPCkJOaEFXb1Qyb3M0dTZXMGhlRlYxeUk5S2s1a1dmR3BHSG1Bc1p6c0NnWUJpcjd3YXpNNk40aTZCM0JtRVJxb2sKL1R1bm42UkFBZDVpSjFMVXZtSUdld2tjbFVsUDFHeVhTN3FLcDhMakVwTGZpQlhBd3NKcEJhQ0dKZDRVTm1IWQpSWWRZT0hSOUtlQ3NaYnJOM3dadGxpMzBCZGkwOWxtcDd2YXJGR0owUjd6S1dBWURoNDY5SHR0dWxqRHBIeVQwClZZbmJTTVg5aEp3M1lKZ2ZDeHhSUndLQmdRQ2tCTWVyT1ZYZWtKSHNMZWkwajJvbm5OV2srL1VJMTR1RlBsN3UKd29BcVRreUZoOVNQRGJ4S0F2QkZzOC94Wkp2TXN0Q1Z0WnYvdy91NnIxOWJEUFo2QkxqNUc2MU5BV3lvamFveApONXd6blFzMnM4VkI5QzlHUXBaVDJXclZlU2RRUzMvOGw3YVhXYThkdFRIWXpoYk45T3FPMjZJb2FSWDl5TWJPClphZzZsd0tCZ0VNeWFicEhzVHVIMmlpWTVxQ2hhSGZ6L1ZvK1A1NGliaTJQR1JWSllsMW9nWWYyVWorYlpPbisKQWtGajRYbGtSdFJrVk8zWXdwQndNY25XY0cyUStCUVQrOENSdXpiNFc3dDJsaGJMMTJ4clF6T2xxQWJPTW4zZwp1U2QzV1Fkbk1QVjNOSnFja1BWUXNjRUJJQ3JmTmQ2RXQ3V0tLSnV2SW9jMlBvbUhabVVjCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
---

# to read the config for terminating authentication
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: RELEASE-NAME-kubedb-apiserver-extension-server-authentication-reader
  namespace: kube-system
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"
roleRef:
  kind: Role
  apiGroup: rbac.authorization.k8s.io
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: RELEASE-NAME-kubedb
  namespace: hub
---
# to delegate authentication and authorization
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: RELEASE-NAME-kubedb-apiserver-auth-delegator
  labels:
    chart: "kubedb-0.1.3"
    app: "kubedb"
    heritage: "Tiller"
    release: "RELEASE-NAME"
roleRef:
  kind: ClusterRole
  apiGroup: rbac.authorization.k8s.io
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: RELEASE-NAME-kubedb
  namespace: hub

---
# Source: kubedb/templates/validating-webhook-configuration.yaml


